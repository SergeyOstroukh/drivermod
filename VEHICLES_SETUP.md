# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–±–ª–∏—Ü –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: —Å–º. [HOW_TO_RUN_MIGRATION.md](HOW_TO_RUN_MIGRATION.md)**

### –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **SQL Editor**
2. **–ù–∞–∂–º–∏—Ç–µ "New query"**
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥** –∏–∑ `supabase/migrations/COMPLETE_VEHICLES_SETUP.sql`
4. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor** –∏ –Ω–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ `Ctrl+Enter`)

### –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã:

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é `005_add_vehicle_dates.sql` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π:
- `inspection_start` (–¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç–µ—Ö–æ—Å–º–æ—Ç—Ä–∞)
- `insurance_start` (–¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏)
- `oil_change_mileage` (–ø—Ä–æ–±–µ–≥ –∑–∞–º–µ–Ω—ã –º–∞—Å–ª–∞)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ **Table Editor**
2. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–≤–µ –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
   - `drivers` (–≤–æ–¥–∏—Ç–µ–ª–∏)
   - `vehicles` (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### –¢–∞–±–ª–∏—Ü–∞ `drivers` (–≤–æ–¥–∏—Ç–µ–ª–∏):
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `name` - –§–ò–û –≤–æ–¥–∏—Ç–µ–ª—è
- `phone` - —Ç–µ–ª–µ—Ñ–æ–Ω
- `license_number` - –Ω–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- `license_expiry` - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- `notes` - –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `created_at`, `updated_at` - –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –¢–∞–±–ª–∏—Ü–∞ `vehicles` (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏):
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `plate_number` - –≥–æ—Å. –Ω–æ–º–µ—Ä (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `driver_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–æ–¥–∏—Ç–µ–ª—è (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- `mileage` - –ø—Ä–æ–±–µ–≥ –≤ –∫–º
- `oil_change_info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∑–∞–º–µ–Ω–µ –º–∞—Å–ª–∞
- `oil_change_interval` - —Ä–µ–≥–ª–∞–º–µ–Ω—Ç –∑–∞–º–µ–Ω—ã –º–∞—Å–ª–∞ (–∫–º)
- `inspection_expiry` - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–µ—Ö–æ—Å–º–æ—Ç—Ä–∞
- `insurance_expiry` - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏
- `driver_period_start` - –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–º
- `driver_period_end` - –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–º
- `notes` - –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `created_at`, `updated_at` - –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **–í–æ–¥–∏—Ç–µ–ª–∏** –∏–ª–∏ **–ê–≤—Ç–æ–º–æ–±–∏–ª–∏**
3. –ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

**–í–æ–¥–∏—Ç–µ–ª–∏:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π
- –£–∫–∞–∑–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –Ω–æ–º–µ—Ä–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∑–∞ 30 –¥–Ω–µ–π)

**–ê–≤—Ç–æ–º–æ–±–∏–ª–∏:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–≥–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∑–∞–º–µ–Ω–µ –º–∞—Å–ª–∞ –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–æ–∫–æ–≤ —Ç–µ—Ö–æ—Å–º–æ—Ç—Ä–∞ –∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∑–∞ 30 –¥–Ω–µ–π)
- –£–∫–∞–∑–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª–µ–º (–¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "relation does not exist"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ Table Editor

### –û—à–∏–±–∫–∞ "foreign key constraint"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `drivers`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–æ–¥–∏—Ç–µ–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ–¥–∏—Ç–µ–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–í–æ–¥–∏—Ç–µ–ª–∏"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

